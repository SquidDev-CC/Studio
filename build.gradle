apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'idea'

sourceCompatibility = 1.8
version = '0.1'

repositories {
	mavenCentral()
}

dependencies {
	compile group: 'org.ow2.asm', name: 'asm-all', version: '5.+'
	compile group: 'jline', name: 'jline', version: '2.+'
	compile files('lib/ComputerCraft1.65.jar')
	testCompile group: 'junit', name: 'junit', version: '4.+'
}

uploadArchives {
	repositories {
		flatDir {
			dirs 'build'
		}
	}
}

sourceSets {
	main {
		resources {
			exclude '**/__ignore/*'
		}
	}
}

test {
	filter {
		includeTestsMatching "squidev.*"
	}

	beforeTest { descriptor ->
		logger.lifecycle("Running test: " + descriptor)
	}

	// listen to standard out and standard error of the test JVM(s)
	onOutput { descriptor, event ->
		logger.lifecycle("Test: " + descriptor + " produced standard out/err: " + event.message)
	}
}
